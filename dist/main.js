(()=>{"use strict";const e=document.querySelector(".main");function t(t){o.forEach((n=>{n.name===t&&e.appendChild(n.displayDOM())}))}function n(){for(;e.firstChild;)e.removeChild(e.lastChild)}function s(){document.querySelectorAll(".project-btn").forEach((e=>{e.textContent===r[0]?e.classList.add("selected"):e.classList.remove("selected")}))}const c=document.querySelector("#form-container"),a=document.querySelector(".form");function d(){c.style.display="none"}const o=[],r=[];class i{cardlist=[];constructor(e){this.name=e}addCard(e){this.cardlist.push(e)}removeCard(e){this.cardlist.forEach(((t,n)=>{t.title===e&&this.cardlist.splice(n,1)}))}displayDOM(){const e=document.createElement("div");e.classList="project";const t=document.createElement("h2");return t.textContent=this.name,e.appendChild(t),this.cardlist.forEach((t=>{e.appendChild(t.displayCARD())})),e}appendToNav(){const e=document.querySelector(".project-btns"),c=document.createElement("li");c.classList="js-li-project";const a=document.createElement("button");if(a.classList.add("project-btn"),a.textContent=this.name,a.addEventListener("click",(e=>{r[0]=this.name,n(),t(this.name),s()})),c.appendChild(a),"Default Project"!==this.name){const t=document.createElement("button");t.classList="remove",t.textContent="x",t.addEventListener("click",(()=>{e.removeChild(c);const t=o.findIndex((e=>e.name===this.name));o.splice(t,1),n(),m()})),c.appendChild(t)}e.appendChild(c)}sortByDate(){this.cardlist.sort((function(e,t){return new Date(e.date)-new Date(t.date)}))}}const l=document.querySelector(".main");function m(){const e=document.createElement("div");e.classList="project";const t=document.createElement("h2");t.textContent="All Projects",e.appendChild(t),o.forEach((t=>{t.sortByDate(),t.cardlist.forEach((t=>{e.appendChild(t.displayCARD())}))})),n(),l.appendChild(e),r[0]="All Projects",s()}function u(e){return e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)}const h=new Date,p=u(h),C=u(new Date(h.setDate(h.getDate()-h.getDay()+7))),f=[];let E=new Date;f.push(u(E));let y="";do{E.setDate(E.getDate()+1),y=u(E),f.push(y)}while(y!==C);const D=[],v=new Date,L=new Date(v.setDate(v.getDate()-v.getDay()+7));let j="";for(let e=0;e<7;e++)L.setDate(L.getDate()+1),j=u(L),D.push(j);const x=["All time"];class A{constructor(e,t,n,s){this.title=e,this.description=t,this.date=n,this.priority=s,this.done=!1}displayCARD(){if("All time"===x[0]||"Today"===x[0]&&this.date===p||"This Week"===x[0]&&f.includes(this.date)||"Next Week"===x[0]&&D.includes(this.date)){const e=document.createElement("div");e.classList="card";const t=document.createElement("h3");t.textContent=this.title;const n=document.createElement("p");n.textContent=this.description;const s=document.createElement("p");s.textContent=this.date;const c=document.createElement("INPUT");c.setAttribute("type","checkbox"),this.done&&(c.setAttribute("checked","true"),e.classList.add("done")),c.addEventListener("change",(t=>{t.target.checked?(e.classList.add("done"),this.done=!0):(e.classList.remove("done"),this.done=!1)}));const a=document.createElement("button");return a.classList.add("remove"),a.textContent="x",a.addEventListener("click",(()=>{e.classList.add("removed"),o.forEach((e=>{e.removeCard(this.title)}))})),e.appendChild(t),e.appendChild(n),e.appendChild(s),e.appendChild(c),e.appendChild(a),e}return document.createElement("div")}}const b=u(new Date),w=new A("Comida 1","Comprar comida",b,"high"),g=new A("Comida 2","Comprar mÃ¡s comida",b,"medium"),k=new i("Default Project");o.push(k),k.appendToNav(),k.addCard(w),k.addCard(g),r[0]="All Projects",m(),s();const q=document.querySelector(".project-menu");var S;S=()=>{q.style.display="flex"},document.querySelector("#js-add-project").addEventListener("click",(()=>{S()})),q.addEventListener("submit",(e=>{e.preventDefault();const c=new FormData(e.target),a=Object.fromEntries(c),d=new i(a["proj-title"]);o.push(d),d.appendToNav(),n(),t(d.name),r[0]=d.name,s(),q.reset(),q.style.display="none"})),document.querySelector("#js-btn-cards").addEventListener("click",(()=>{c.style.display="flex"})),c.addEventListener("click",(e=>{"form-container"===e.target.id&&d()})),a.addEventListener("submit",(e=>{!function(e){e.preventDefault();const t=new FormData(e.target),n=Object.fromEntries(t),s=new A(n.title,n.description,n.date,n.priority);o.forEach((e=>{e.name===r[0]&&(e.addCard(s),e.sortByDate())})),"All Projects"===r[0]&&(o[0].addCard(s),o[0].sortByDate())}(e),a.reset(),d(),n(),"All Projects"===r[0]?m():t(r[0])})),document.querySelector(".all-projects").addEventListener("click",(()=>{r[0]="All Projects",m(),s()})),document.querySelectorAll(".filter-btn").forEach((e=>e.addEventListener("click",(s=>{x[0]=e.textContent,document.querySelectorAll(".filter-btn").forEach((e=>{e.textContent===x[0]?e.classList.add("selected"):e.classList.remove("selected")})),n(),"All Projects"===r[0]?m():t(r[0])}))))})();